---
title: ã€Šæ ‘è“æ´¾å®¶åº­æœåŠ¡å™¨æ­å»ºæŒ‡å—ã€‹ç¬¬åå…«æœŸï¼šä»£ç†Windowså°å¼æœºæ”¯æŒRemote Desktopå¤–ç½‘è¿œç¨‹æ¡Œé¢è¿æ¥, éšæ—¶ç©è½¬Stable Diffusion WebUI / ã€ŠUse Piã€‹ Issue 18 Proxying Windows Desktop to Support Remote Desktop Connection from the Internet, Playing with Stable Diffusion WebUI anytime
categories:
- æ ‘è“æ´¾ä¸åƒç° / Use Pi
---


zhaooleeåœ¨å®¶ä¸­Windowså°å¼æœºæŠ˜è…¾Stable Diffusion WebUI , ä¸ºäº†å‡ºé—¨åœ¨å¤–ä¹Ÿèƒ½è®¿é—®Windowså°å¼æœºçš„Stable Diffusion WebUIï¼Œ æœ¬æ–‡ç”¨æ ‘è“æ´¾ä»£ç†å°å¼æœºçš„3389ç«¯å£ï¼Œå°†å…¶æ˜ å°„åˆ°å…¬ç½‘ä¸Š(ä»¥ä¸‹æ˜¯Stable Diffusion WebUIå‡ºçš„å›¾ï¼ŒåŸå›¾åœ¨æ–‡æœ«)ã€‚

ğŸŒˆZhaoolee is playing with Stable Diffusion WebUI on his home Windows desktop. In order to access the Windows desktop's Stable Diffusion WebUI when he is out, this article uses Raspberry Pi to proxy the 3389 port of the desktop and maps it to the public network (the following is the picture from Stable Diffusion WebUI, the original picture is at the end of the article).

![3203841-45fd21a316307d32](https://cdn.fangyuanxiaozhan.com/assets/1687427734227N8RYD2z5.png)

## æ‰“å¼€Windowså°å¼æœºçš„è¿œç¨‹è¿æ¥æœåŠ¡ï¼Œä½¿å…¶å¯ä»¥è¢«è¿œç¨‹è¿æ¥ / Enable Remote Connection Service on Windows Desktop to Allow Remote Connection

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427428544QnpPsTXZ.png)


![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427428579De8ERH0h.png)

é€šè¿‡ä¸Šé¢ä¸¤å¼ å›¾ï¼Œæˆ‘ä»¬å¯è·å–åç»­ç™»å½•ä¼šç”¨åˆ°çš„ç”µè„‘åç§°å’Œç”¨æˆ·å

ğŸŒˆThrough the above two pictures, we can get the computer name and username that will be used for subsequent login.



æ³¨æ„ï¼Œå½“å‰çš„ Windows ç”¨æˆ·ï¼Œé¡»æ”¯æŒå¯†ç ç™»å½•;

ğŸŒˆNote that the current Windows user must support password login;

## é€šè¿‡è·¯ç”±å™¨ä¸ºWindowså°å¼æœºåˆ†é…å›ºå®šIP  / Assign a Fixed IP to the Windows Desktop through the Router

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427429260jW65B6zd.png)


æˆ‘çš„å°å¼æœºåœ¨å±€åŸŸç½‘çš„IPä¸º`192.168.50.136` æˆ‘å°†å…¶MACåœ°å€ä¸IPç»‘å®šï¼Œåˆ™å°å¼æœºæ¯æ¬¡è”ç½‘éƒ½ä¼šä½¿ç”¨IP`192.168.50.136`

ğŸŒˆMy desktop's IP in the LAN is `192.168.50.136`. I bind its MAC address to the IP, so the desktop will use IP `192.168.50.136` every time it connects to the internet.

## è®¾ç½®æ ‘è“æ´¾ç«¯å£è½¬å‘ / Setting Up Port Forwarding on Raspberry Pi

æˆ‘çš„æ ‘è“æ´¾IPä¸º `192.168.50.10` ï¼Œ Windows è‡ªå¸¦çš„è¿œç¨‹è¿æ¥Remote Desktop Connection çš„é»˜è®¤ç«¯å£ä¸º3389

ğŸŒˆMy Raspberry Pi's IP is `192.168.50.10`, and the default port for Windows' built-in Remote Desktop Connection is 3389.



æˆ‘åœ¨æ ‘è“æ´¾çš„Nginxä»£ç†æœåŠ¡å™¨åˆ›å»ºstream.conf.dæ–‡ä»¶å¤¹

ğŸŒˆI create a stream.conf.d folder on the Nginx proxy server of my Raspberry Pi.

```
sudo mkdir /etc/nginx/stream.conf.d
```

å¹¶æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ `/etc/nginx/stream.conf.d/192.168.50.136-3389-win-remote-desktop-connection.conf`

ğŸŒˆAnd add a configuration file `/etc/nginx/stream.conf.d/192.168.50.136-3389-win-remote-desktop-connection.conf`

```
server {
    listen 3389;
    proxy_pass 192.168.50.136:3389;
}
```

åœ¨`/etc/nginx/nginx.conf`å†…æ·»åŠ streamç›¸å…³çš„é…ç½®

ğŸŒˆAdd stream related configuration in `/etc/nginx/nginx.conf`

```
http {
    # è¿™è¡ŒåŒ…å«æ‰€æœ‰åœ¨ /etc/nginx/conf.d/ ç›®å½•ä¸‹ï¼Œä»¥ .conf ç»“å°¾çš„é…ç½®æ–‡ä»¶
    include /etc/nginx/conf.d/*.conf;
}

stream {
    # è¿™è¡ŒåŒ…å«æ‰€æœ‰åœ¨ /etc/nginx/stream.conf.d/ ç›®å½•ä¸‹ï¼Œä»¥ .conf ç»“å°¾çš„é…ç½®æ–‡ä»¶
    include /etc/nginx/stream.conf.d/*.conf;
}
```

ç„¶åæ£€æµ‹é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œé‡å¯Nginx

ğŸŒˆThen check if the configuration file format is correct, and restart Nginx

```
sudo nginx -t
sudo nginx -s reload
```

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427429937XGi8pPWf.png)


æ ‘è“æ´¾çš„Nginxé‡å¯æˆåŠŸåï¼Œè®¿é—®192.168.50.10:3389 å°±ç­‰åŒäºè®¿é—®192.168.50.136:3389

ğŸŒˆAfter the Nginx of the Raspberry Pi restarts successfully, accessing 192.168.50.10:3389 is equivalent to accessing 192.168.50.136:3389

## é€šè¿‡frpè®¾ç½®å…¬ç½‘è®¿é—® / Setting Up Public Network Access through frp


åœ¨æ ‘è“æ´¾çš„ frpc.iniä¸­æ·»åŠ é…ç½®

ğŸŒˆAdd configuration in the frpc.ini of Raspberry Pi

```
[remote-desktop-33891]
type = tcp
local_ip = 127.0.0.1
local_port = 3389
remote_port = 33891
```


æ­¤æ®µé…ç½®çš„å«ä¹‰æ˜¯ï¼Œå°†æœåŠ¡ç«¯ 33891 ç«¯å£æ¥æ”¶åˆ°çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°æ ‘è“æ´¾çš„ 3389 ç«¯å£

ğŸŒˆThe meaning of this configuration is to forward the requests received by the server's 33891 port to the Raspberry Pi's 3389 port.

æ ‘è“æ´¾ä¼šé€šè¿‡ Nginxå°† 3389 ç«¯å£çš„è¯·æ±‚è½¬å‘åˆ° Windows å°å¼æœºã€‚

ğŸŒˆRaspberry Pi will forward the requests of 3389 port to Windows desktop through Nginx.


## å¤–ç½‘è¿œç¨‹è¿æ¥Windowså°å¼æœº / Remote Connection to Windows Desktop from the Internet

### Windowså‘èµ·è¿œç¨‹æ¡Œé¢è¿æ¥ / Initiating Remote Desktop Connection from Windows

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427434166e0PC88jY.png)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427436674knGzxDaH.png)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/16874274406150fYXyJxj.png)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/16874274431175eKpDB2z.png)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427444758ADcWm1rA.png)
![image.png](https://upload-images.jianshu.io/upload_images/3203841-a486fe6384859fbf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/16874274515115swccRcB.png)


### macOSå‘èµ·è¿œç¨‹æ¡Œé¢è¿æ¥ / Initiating Remote Desktop Connection from macOS

é¦–å…ˆä¸‹è½½å®‰è£…macOSç‰ˆ Microsoft Remote Desktop https://install.appcenter.ms/orgs/rdmacios-k2vy/apps/microsoft-remote-desktop-for-mac/distribution_groups/all-users-of-microsoft-remote-desktop-for-mac


ğŸŒˆFirst, download and install the macOS version of Microsoft Remote Desktop https://install.appcenter.ms/orgs/rdmacios-k2vy/apps/microsoft-remote-desktop-for-mac/distribution_groups/all-users-of-microsoft-remote-desktop-for-mac


![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427454230DY3sMYWy.png)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427457975sps7NeFG.png)


![image.png](https://cdn.fangyuanxiaozhan.com/assets/168742745944537BGCKTC.png)
![image.png](https://upload-images.jianshu.io/upload_images/3203841-5a1f7093f1cdfbe7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


![image.png](https://cdn.fangyuanxiaozhan.com/assets/16874274635366B4DWNSh.png)
![image.png](https://upload-images.jianshu.io/upload_images/3203841-8f7000a9318fa96f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](https://upload-images.jianshu.io/upload_images/3203841-7e13c5221ee87a64.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image.png](https://cdn.fangyuanxiaozhan.com/assets/1687427474278fPXrrhHA.png)


å®‰å“å®¢æˆ·ç«¯: https://play.google.com/store/apps/details?id=com.microsoft.rdc.androidx

ğŸŒˆAndroid client: https://play.google.com/store/apps/details?id=com.microsoft.rdc.androidx

iOSå®¢æˆ·ç«¯: https://apps.apple.com/app/microsoft-remote-desktop/id714464092



ğŸŒˆiOS client: https://apps.apple.com/app/microsoft-remote-desktop/id714464092

## Stable Diffusion WebUI è¿œç¨‹ç”Ÿäº§å›¾ç‰‡ï¼Œè®©è€æ˜¾å¡é‡æ–°å‘å…‰å‘çƒ­! / Stable Diffusion WebUI Produces Images Remotely, Making the Old Graphics Card Glow and Heat Up Again!

å®Œæˆäº†æœ¬æ–‡çš„é…ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥éšæ—¶éšåœ°å¯åŠ¨å®¶é‡Œå°å¼æœºçš„Stable Diffusion WebUIï¼Œ äº§å‡ºéœ€è¦çš„å›¾ç‰‡äº†ï¼Œmake RTX2060 great again!

ğŸŒˆAfter completing the configuration in this article, we can start the Stable Diffusion WebUI of the desktop at home anytime and anywhere, and produce the pictures we need, make RTX2060 great again!

![00014-4139237203.png](https://cdn.fangyuanxiaozhan.com/assets/16874274763223Ny5xz5e.png)

![00038-948021751.png](https://cdn.fangyuanxiaozhan.com/assets/1687427478538pBCwD3GF.png)


![00049-3428618116.png](https://cdn.fangyuanxiaozhan.com/assets/1687427484811SfbA4XKr.png)

![00051-3428618118.png](https://cdn.fangyuanxiaozhan.com/assets/168742748853410BhZFM8.png)





## å°ç»“

æ ‘è“æ´¾è™½ç„¶æ€§èƒ½æœ‰é™ï¼Œå´å¾ˆé€‚åˆåšç½‘å…³ï¼ŒæŒ‰ç…§æœ¬æ–‡çš„æ–¹æ³•ï¼Œå¯ä»¥æŠŠæ€§èƒ½å¼ºå¤§çš„å°å¼è®¾å¤‡æ˜ å°„åˆ°å…¬ç½‘ï¼Œéšæ—¶ä¾›æˆ‘ä»¬é€šè¿‡äº’è”ç½‘è¿›è¡Œè°ƒç”¨ã€‚

ğŸŒˆAlthough the Raspberry Pi has limited performance, it is very suitable for acting as a gateway. According to the method in this article, we can map powerful desktop devices to the public network for us to call via the Internet at any time.

æœ€è¿‘ç¿»æŸå®ï¼Œå‘ç°æ ‘è“æ´¾4Bä»·æ ¼ä¹Ÿæ­£åœ¨å›è½ï¼Œå†…å­˜8GBçš„æ¿å­å·²ç»åˆ°äº†500RMBçš„ä»·ä½æ®µï¼ˆæ ‘è“æ´¾4B 8GBåŸä»·æ˜¯75ç¾åˆ€ï¼‰ï¼Œç›®æµ‹ä»Šå¹´ç§‹å­£èƒ½å›å½’æ­£å¸¸ä»·æ ¼ã€‚

ğŸŒˆRecently, I found that the price of Raspberry Pi 4B is also falling. The 8GB memory board has reached the price segment of 500 RMB (the original price of Raspberry Pi 4B 8GB is 75 US dollars). It is expected to return to normal price this autumn.

ä»Šå¤©æ˜¯2023å¹´6æœˆ22æ—¥ï¼Œç¥å„ä½è¯»è€…ç«¯åˆèŠ‚åƒå¥½å–å¥½ï¼

ğŸŒˆToday is June 22, 2023, wishing all readers to eat and drink well on the Dragon Boat Festival!



